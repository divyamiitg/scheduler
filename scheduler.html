<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C&A Team 2025-26 Interviews</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f7fa;
        color: #333;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        text-align: center;
        margin-bottom: 30px;
      }
      h1 {
        color: #2c3e50;
        margin-bottom: 10px;
      }
      .tabs {
        display: flex;
        margin-bottom: 20px;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .tab {
        flex: 1;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        border-bottom: 3px solid transparent;
      }
      .tab.active {
        background-color: #f8f9fa;
        border-bottom: 3px solid #3498db;
        font-weight: bold;
      }
      .tab:hover:not(.active) {
        background-color: #f0f2f5;
      }
      .tab-content {
        display: none;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .tab-content.active {
        display: block;
      }
      .calendar {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        grid-gap: 20px;
        margin-top: 20px;
      }
      .day-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      .day-header {
        background: #3498db;
        color: white;
        padding: 10px;
        text-align: center;
        font-weight: bold;
      }
      .day-content {
        padding: 15px;
      }
      .time-slots {
        margin-top: 10px;
      }
      .time-slot {
        margin-bottom: 8px;
        padding: 8px;
        background: #f8f9fa;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .time-slot-checkbox {
        margin-right: 10px;
      }
      .notes-section {
        margin-top: 15px;
      }
      textarea {
        width: 100%;
        min-height: 80px;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 8px;
        font-family: inherit;
        resize: vertical;
      }
      .btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
      }
      .btn:hover {
        background: #2980b9;
      }
      .save-btn {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
      }
      .judges-availability {
        margin-top: 10px;
      }
      .judge-chip {
        display: inline-block;
        background: #e0f7fa;
        border-radius: 16px;
        padding: 5px 10px;
        margin: 3px;
        font-size: 12px;
        color: #00838f;
      }
      .interview-info {
        margin-top: 15px;
        padding: 10px;
        background: #e3f2fd;
        border-radius: 4px;
        font-size: 14px;
      }
      .judge-selector {
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
      }
      .toggle-view {
        margin-left: 10px;
        background: #f0f2f5;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>C&A Team 2025-26 Interviews</h1>
        <p>
          Schedule and manage interviews for 20 students from March 6th onwards
        </p>
      </header>

      <div class="judge-selector">
        <label for="judge-select">Select your name: </label>
        <select id="judge-select">
          <option value="">Select your name</option>
          <option value="Bhadra">Bhadra</option>
          <option value="Aashrith">Aashrith</option>
          <option value="Abhishek">Abhishek</option>
          <option value="Rishi">Rishi</option>
          <option value="Naveen">Naveen</option>
          <option value="Arush">Arush</option>
          <option value="Shivam">Shivam</option>
          <option value="Pranav">Pranav</option>
          <option value="Aditya">Aditya</option>
          <option value="Yash">Yash</option>
          <option value="Divyam">Divyam</option>
          <option value="Ashutosh">Ashutosh</option>
          <option value="Jahnavi">Jahnavi</option>
          <option value="Vishal">Vishal</option>
          <option value="Sai">Sai</option>
        </select>
        <button class="btn toggle-view" id="toggle-view">
          Switch to View Mode
        </button>
      </div>

      <div class="tabs">
        <div class="tab active" data-tab="schedule">Schedule</div>
        <div class="tab" data-tab="availability">My Availability</div>
        <div class="tab" data-tab="overview">Overview</div>
      </div>

      <div class="tab-content active" id="schedule">
        <h2>Interview Schedule</h2>
        <p>Total of 20 students scheduled from March 6th to March 25th, 2025</p>

        <div class="calendar">
          <!-- Days will be generated by JavaScript -->
        </div>
      </div>

      <div class="tab-content" id="availability">
        <h2>Set Your Availability</h2>
        <p>Select all time slots when you're available to conduct interviews</p>

        <div class="calendar" id="availability-calendar">
          <!-- Availability calendar will be generated by JavaScript -->
        </div>

        <button class="btn save-btn" id="save-availability">
          Save My Availability
        </button>
      </div>

      <div class="tab-content" id="overview">
        <h2>Judges Availability Overview</h2>
        <p>See which judges are available for each interview slot</p>

        <div class="calendar" id="overview-calendar">
          <!-- Overview calendar will be generated by JavaScript -->
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Mock data
        const judges = [
          "Bhadra",
          "Aashrith",
          "Abhishek",
          "Rishi",
          "Naveen",
          "Arush",
          "Shivam",
          "Pranav",
          "Aditya",
          "Yash",
          "Divyam",
          "Ashutosh",
          "Jahnavi",
          "Vishal",
          "Sai",
        ];

        const timeSlots = [
          { id: 1, time: "9:00 AM - 12:00 PM" },
          { id: 2, time: "12:00 PM - 3:00 PM" },
          { id: 3, time: "3:00 PM - 6:00 PM" },
          { id: 4, time: "6:00 PM - 9:00 PM" },
          { id: 5, time: "9:00 PM - 12:00 AM" },
          { id: 6, time: "12:00 AM - 3:00 AM" },
        ];

        // Generate mock student data
        const students = Array.from({ length: 20 }, (_, i) => ({
          id: i + 1,
          name: `Student ${i + 1}`,
          details: "",
        }));

        // Create date objects for the interview period
        const startDate = new Date("2025-03-06");
        const interviewDays = [];

        for (let i = 0; i < 20; i++) {
          const currentDate = new Date(startDate);
          currentDate.setDate(startDate.getDate() + i);
          interviewDays.push({
            date: currentDate,
            student: students[i],
            selectedSlot: null,
            notes: "",
            judgesAvailability: {},
          });
        }

        // Initialize the judgesAvailability for each day and time slot
        interviewDays.forEach((day) => {
          timeSlots.forEach((slot) => {
            day.judgesAvailability[slot.id] = [];
          });
        });

        // Store the current user/judge
        let currentJudge = "";
        let isViewMode = false;

        // Tab functionality
        const tabs = document.querySelectorAll(".tab");
        const tabContents = document.querySelectorAll(".tab-content");

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tabContents.forEach((c) => c.classList.remove("active"));

            tab.classList.add("active");
            document.getElementById(tab.dataset.tab).classList.add("active");

            // Refresh content when tab changes
            renderCalendars();
          });
        });

        // Judge selection
        const judgeSelect = document.getElementById("judge-select");
        judgeSelect.addEventListener("change", (e) => {
          currentJudge = e.target.value;
          renderCalendars();
        });

        // Toggle view mode
        const toggleViewBtn = document.getElementById("toggle-view");
        toggleViewBtn.addEventListener("click", () => {
          isViewMode = !isViewMode;
          toggleViewBtn.textContent = isViewMode
            ? "Switch to Edit Mode"
            : "Switch to View Mode";
          renderCalendars();
        });

        // Save availability button
        const saveBtn = document.getElementById("save-availability");
        saveBtn.addEventListener("click", () => {
          if (!currentJudge) {
            alert("Please select your name first");
            return;
          }

          alert("Your availability has been saved successfully!");
        });

        // Render all calendars
        function renderCalendars() {
          renderScheduleCalendar();
          renderAvailabilityCalendar();
          renderOverviewCalendar();
        }

        // Render the main schedule calendar
        function renderScheduleCalendar() {
          const calendarEl = document.querySelector("#schedule .calendar");
          calendarEl.innerHTML = "";

          interviewDays.forEach((day, index) => {
            const dateStr = day.date.toLocaleDateString("en-US", {
              weekday: "short",
              month: "short",
              day: "numeric",
              year: "numeric",
            });

            const dayCard = document.createElement("div");
            dayCard.className = "day-card";

            dayCard.innerHTML = `
            <div class="day-header">
              ${dateStr}
            </div>
            <div class="day-content">
              <div class="interview-info">
                <strong>Student:</strong> ${day.student.name}
              </div>
              
              <div class="time-slots">
                <h4>Selected Time Slot:</h4>
                <select class="time-slot-select" data-day="${index}" ${
              isViewMode ? "disabled" : ""
            }>
                  <option value="">Select a time slot</option>
                  ${timeSlots
                    .map(
                      (slot) =>
                        `<option value="${slot.id}" ${
                          day.selectedSlot === slot.id ? "selected" : ""
                        }>
                      ${slot.time}
                    </option>`
                    )
                    .join("")}
                </select>
              </div>
              
              <div class="judges-availability">
                <h4>Available Judges:</h4>
                <div class="judges-list" id="judges-day-${index}">
                  ${renderAvailableJudges(day, day.selectedSlot)}
                </div>
              </div>
              
              <div class="notes-section">
                <h4>Notes:</h4>
                <textarea placeholder="Add notes about this interview..." 
                  data-day="${index}" ${isViewMode ? "readonly" : ""}>${
              day.notes
            }</textarea>
              </div>
            </div>
          `;

            calendarEl.appendChild(dayCard);

            // Add event listeners to the new elements
            const select = dayCard.querySelector(".time-slot-select");
            select.addEventListener("change", (e) => {
              day.selectedSlot = e.target.value
                ? parseInt(e.target.value)
                : null;
              document.getElementById(`judges-day-${index}`).innerHTML =
                renderAvailableJudges(day, day.selectedSlot);
            });

            const textarea = dayCard.querySelector("textarea");
            textarea.addEventListener("change", (e) => {
              day.notes = e.target.value;
            });
          });
        }

        // Render the availability calendar
        function renderAvailabilityCalendar() {
          const calendarEl = document.getElementById("availability-calendar");
          calendarEl.innerHTML = "";

          if (!currentJudge) {
            calendarEl.innerHTML =
              "<p>Please select your name to set your availability</p>";
            return;
          }

          interviewDays.forEach((day, index) => {
            const dateStr = day.date.toLocaleDateString("en-US", {
              weekday: "short",
              month: "short",
              day: "numeric",
              year: "numeric",
            });

            const dayCard = document.createElement("div");
            dayCard.className = "day-card";

            let timeSlotCheckboxes = "";
            timeSlots.forEach((slot) => {
              const isAvailable =
                day.judgesAvailability[slot.id].includes(currentJudge);
              timeSlotCheckboxes += `
              <div class="time-slot">
                <label>
                  <input type="checkbox" class="time-slot-checkbox" 
                    data-day="${index}" data-slot="${slot.id}" 
                    ${isAvailable ? "checked" : ""} ${
                isViewMode ? "disabled" : ""
              }>
                  ${slot.time}
                </label>
              </div>
            `;
            });

            dayCard.innerHTML = `
            <div class="day-header">
              ${dateStr}
            </div>
            <div class="day-content">
              <div class="interview-info">
                <strong>Student:</strong> ${day.student.name}
              </div>
              
              <div class="time-slots">
                <h4>I'm available at:</h4>
                ${timeSlotCheckboxes}
              </div>
            </div>
          `;

            calendarEl.appendChild(dayCard);

            // Add event listeners to checkboxes
            const checkboxes = dayCard.querySelectorAll(".time-slot-checkbox");
            checkboxes.forEach((checkbox) => {
              checkbox.addEventListener("change", (e) => {
                const dayIndex = parseInt(e.target.dataset.day);
                const slotId = parseInt(e.target.dataset.slot);

                if (e.target.checked) {
                  // Add judge to availability
                  if (
                    !interviewDays[dayIndex].judgesAvailability[
                      slotId
                    ].includes(currentJudge)
                  ) {
                    interviewDays[dayIndex].judgesAvailability[slotId].push(
                      currentJudge
                    );
                  }
                } else {
                  // Remove judge from availability
                  interviewDays[dayIndex].judgesAvailability[slotId] =
                    interviewDays[dayIndex].judgesAvailability[slotId].filter(
                      (j) => j !== currentJudge
                    );
                }
              });
            });
          });
        }

        // Render the overview calendar
        function renderOverviewCalendar() {
          const calendarEl = document.getElementById("overview-calendar");
          calendarEl.innerHTML = "";

          interviewDays.forEach((day, index) => {
            const dateStr = day.date.toLocaleDateString("en-US", {
              weekday: "short",
              month: "short",
              day: "numeric",
              year: "numeric",
            });

            const dayCard = document.createElement("div");
            dayCard.className = "day-card";

            let timeSlotsHTML = "";
            timeSlots.forEach((slot) => {
              const availableJudges = day.judgesAvailability[slot.id];
              timeSlotsHTML += `
              <div class="time-slot">
                <div><strong>${slot.time}</strong></div>
                <div>
                  ${
                    availableJudges.length > 0
                      ? availableJudges
                          .map(
                            (judge) =>
                              `<span class="judge-chip">${judge}</span>`
                          )
                          .join("")
                      : "<em>No judges available</em>"
                  }
                </div>
              </div>
            `;
            });

            dayCard.innerHTML = `
            <div class="day-header">
              ${dateStr}
            </div>
            <div class="day-content">
              <div class="interview-info">
                <strong>Student:</strong> ${day.student.name}
              </div>
              
              <div class="time-slots">
                <h4>Judges Availability:</h4>
                ${timeSlotsHTML}
              </div>
              
              ${
                day.selectedSlot
                  ? `
                <div class="interview-info">
                  <strong>Selected Time:</strong> ${
                    timeSlots.find((s) => s.id === day.selectedSlot)?.time || ""
                  }
                </div>
              `
                  : ""
              }
            </div>
          `;

            calendarEl.appendChild(dayCard);
          });
        }

        // Helper function to render available judges for a day and slot
        function renderAvailableJudges(day, slotId) {
          if (!slotId) return "<em>No time slot selected</em>";

          const availableJudges = day.judgesAvailability[slotId] || [];

          if (availableJudges.length === 0) {
            return "<em>No judges available for this time slot</em>";
          }

          return availableJudges
            .map((judge) => `<span class="judge-chip">${judge}</span>`)
            .join("");
        }

        // Initial rendering
        renderCalendars();

        // Simulate some data for demo purposes
        function populateDemoData() {
          // Add some random availability
          interviewDays.forEach((day) => {
            timeSlots.forEach((slot) => {
              // Randomly add 3-8 judges as available for each slot
              const numJudges = Math.floor(Math.random() * 6) + 3;
              const shuffledJudges = [...judges].sort(
                () => 0.5 - Math.random()
              );
              day.judgesAvailability[slot.id] = shuffledJudges.slice(
                0,
                numJudges
              );
            });

            // Randomly select a time slot for some days
            if (Math.random() > 0.3) {
              day.selectedSlot = Math.floor(Math.random() * 6) + 1;
            }

            // Add some sample notes
            if (Math.random() > 0.7) {
              day.notes =
                "Remember to ask about their project experience and team collaboration skills.";
            }
          });

          renderCalendars();
        }

        // Populate with demo data
        populateDemoData();
      });
    </script>
  </body>
</html>
